

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="Description" content="Ember.js的中文开发者交流平台，提供Ember.js官方网站指南和API的中文翻译，持续关注最近的社区动态，为您提供高质量的Ember.js中文资料。 " />
    <meta name="Keywords" content="Ember.js、Ember、Javascript、Javascript框架、HTML、论坛、博客、中文社区" />
    <title>Ember.js - 路由: 指定路由的模型</title>
    <link rel="shortcut icon" href="/images/favicon.png" />
    <!--[if lte IE 7 ]><link href="/stylesheets/fonts/fontello-ie7.css" media="screen" rel="stylesheet" type="text/css" /><![endif]-->
    <link href="/stylesheets/site.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/highlight.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/emberjs-cn.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="http://emberjs.cn/blog/feed.xml" rel="alternate" type="application/atom+xml" title="Ember.js CN - 博客" />

    <script type="text/javascript">
      var _gaq = _gaq || [];
      var pluginUrl = '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
      _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
      _gaq.push(['_setAccount', 'UA-38578402-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>

<!--[if lt IE 9]>
    <script type="text/javascript" src="/javascripts/common-old-ie.js"></script>
<![endif]-->
<!--[if gte IE 9]><!-->
    <script type="text/javascript" src="/javascripts/common-modern.js"></script>
<!--<![endif]-->

    
    <script type="text/javascript" src="/javascripts/guides.js"></script>
    <script src="http://static.jsbin.com/js/embed.js"></script>
  
  </head>

  <body class="guides guides_routing guides_routing_specifying-a-routes-model guides_routing_specifying-a-routes-model_index">
    <div id="header">
      <div id="wrapper">
        <a id="logo" href="/">&nbsp;</a>
        <ul id="nav">
          <li class="active"><a href="/guides">指南</a></li>
          <li>
            <a target="_blank" href="http://discuss.emberjs.cn">论坛</a>
          </li>
          <li><a href="/blog">博客</a></li>
          <li>
            <a target="_blank" href="http://devdocs.io/ember/">API文档</a>
          </li>
          <li><a href="/builds">构建</a></li>
        </ul>
        <div id="github">
          <a href="https://github.com/emberjs-cn"><img src="/images/fork-us.png">Fork Us!</a>
          <a href="https://github.com/emberjs/ember.js"><img src="/images/fork-us.png">Fork Ember!</a>
        </div>
      </div>
    </div>

    <div id="content-wrapper">
      
      
        <div id="sidebar">
          
    <ol id="toc-list">
          <li class="level-1">
            <a href="/guides/getting-started">入门指南</a>
            <ol>
        
            <li class="level-3">
              <a href="/guides/getting-started">介绍</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/planning-the-application">应用规划</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/creating-a-static-mockup">创建静态页面</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/obtaining-emberjs-and-dependencies">获取Ember.js和相应依赖</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/adding-a-route-and-template">添加第一个路由与模板</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/modeling-data">建立模型</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/using-fixtures">使用静态数据</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/displaying-model-data">显示模型数据</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/displaying-a-models-completeness">显示模型的完成状态</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/creating-a-new-model">创建新的模型实例</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/marking-a-model-as-complete-incomplete">标记模型为完成或未完成</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/displaying-the-number-of-incomplete-todos">显示未完成待办事项的数量</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/toggle-todo-editing-state">切换显示和编辑状态</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/accepting-edits">接受修改</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/deleting-todos">删除模型</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/adding-child-routes">添加子路由</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/show-only-incomplete-todos">显示未完成待办事项</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/show-only-complete-todos">显示已完成待办事项</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/show-all-todos-again">显示所有待办事项</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/display-a-button-to-remove-completed-todos">添加移除所有已完成待办事项的按钮</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/show-when-all-todos-are-complete">提示所有待办事项已完成</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/toggle-all-todos">切换已完成和未完成待办事项</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/getting-started/using-other-adapters">更换FixtureAdapter</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="/guides/concepts/core-concepts">概念</a>
            <ol>
        
            <li class="level-3">
              <a href="/guides/concepts/core-concepts">核心概念</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/concepts/naming-conventions">命名惯例</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="/guides/object-model/classes-and-instances">对象模型</a>
            <ol>
        
            <li class="level-3">
              <a href="/guides/object-model/classes-and-instances">类与实例</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/object-model/computed-properties">计算属性</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/object-model/computed-properties-and-aggregate-data">计算属性和带@each的集合数据</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/object-model/observers">观察器</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/object-model/bindings">绑定</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/object-model/reopening-classes-and-instances">重新打开类和实例</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/object-model/what-do-i-use-when">绑定，观察器，计算属性：如何选择？</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="/guides/application">应用</a>
            <ol>
        
            <li class="level-3">
              <a href="/guides/application">介绍</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="/guides/templates/the-application-template">模板</a>
            <ol>
        
            <li class="level-3">
              <a href="/guides/templates/the-application-template">应用模板</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/templates/handlebars-basics">Handlebars基础</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/templates/conditionals">条件表达式</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/templates/displaying-a-list-of-items">显示项目列表</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/templates/changing-scope">切换作用域</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/templates/binding-element-attributes">绑定元素属性</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/templates/binding-element-class-names">绑定元素类名称</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/templates/links">链接</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/templates/actions">操作</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/templates/input-helpers">输入助手</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/templates/rendering-with-helpers">用助手来渲染</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/templates/writing-helpers">编写助手方法</a>
            </li>
          </ol></li>
          <li class="level-1 selected">
            <a href="/guides/routing">路由</a>
            <ol class='selected'>
        
            <li class="level-3">
              <a href="/guides/routing">介绍</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/routing/defining-your-routes">定义路由</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/routing/generated-objects">生成的对象</a>
            </li>
          
            <li class="level-3 sub-selected">
              <a href="/guides/routing/specifying-a-routes-model">指定路由的模型</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/routing/setting-up-a-controller">设置控制器</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/routing/rendering-a-template">渲染模板</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/routing/redirection">重定向</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/routing/specifying-the-location-api">指定地址API</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/routing/query-params">查询参数</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/routing/asynchronous-routing">Asynchronous Routing</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/routing/loading-and-error-substates">Loading / Error Substates</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/routing/preventing-and-retrying-transitions">Preventing and Retrying Transitions</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="/guides/components">组件</a>
            <ol>
        
            <li class="level-3">
              <a href="/guides/components">介绍</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/components/defining-a-component">定义组件</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/components/passing-properties-to-a-component">传递属性</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/components/wrapping-content-in-a-component">包裹内容</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/components/customizing-a-components-element">自定义组件元素</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/components/handling-user-interaction-with-actions">使用Action处理用户交互</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/components/sending-actions-from-components-to-your-application">从组件发送操作给应用</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="/guides/controllers">控制器</a>
            <ol>
        
            <li class="level-3">
              <a href="/guides/controllers">介绍</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/controllers/representing-a-single-model-with-objectcontroller">代表单一模型</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/controllers/representing-multiple-models-with-arraycontroller">代表多模型</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/controllers/dependencies-between-controllers">管理控制器间的依赖</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="/guides/models">模型</a>
            <ol>
        
            <li class="level-3">
              <a href="/guides/models">介绍</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/models/defining-models">定义模型</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/models/creating-and-deleting-records">创建和删除记录</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/models/pushing-records-into-the-store">将记录推入仓库</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/models/persisting-records">持久化记录</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/models/finding-records">查询记录</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/models/working-with-records">使用记录</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/models/connecting-to-an-http-server">连接HTTP服务器</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/models/handling-metadata">处理元数据</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/models/frequently-asked-questions">常见问题</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="/guides/views">视图</a>
            <ol>
        
            <li class="level-3">
              <a href="/guides/views">介绍</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/views/defining-a-view">定义视图</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/views/handling-events">处理事件</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/views/inserting-views-in-templates">在模板中插入视图</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/views/adding-layouts-to-views">为视图添加布局</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/views/customizing-a-views-element">自定义视图元素</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/views/built-in-views">内置视图</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/views/manually-managing-view-hierarchy">手动管理视图层级</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="/guides/enumerables">枚举</a>
            <ol>
        
            <li class="level-3">
              <a href="/guides/enumerables">介绍</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="/guides/testing/integration">测试</a>
            <ol>
        
            <li class="level-3">
              <a href="/guides/testing/integration">集成测试</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="/guides/configuring-ember/disabling-prototype-extensions">配置Ember.js</a>
            <ol>
        
            <li class="level-3">
              <a href="/guides/configuring-ember/disabling-prototype-extensions">禁用基本类型扩展</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/configuring-ember/embedding-applications">嵌入式应用</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/configuring-ember/feature-flags">特性标识</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="/guides/cookbook">Cookbook</a>
            <ol>
        
            <li class="level-3">
              <a href="/guides/cookbook">简介</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/cookbook/user_interface_and_interaction">用户界面与交互</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/cookbook/event_handling_and_data_binding">事件处理和数据绑定</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/cookbook/helpers_and_components">助手与组件</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/cookbook/working_with_objects">使用对象</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="/guides/understanding-ember/the-view-layer">理解Ember.js</a>
            <ol>
        
            <li class="level-3">
              <a href="/guides/understanding-ember/the-view-layer">视图层</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/understanding-ember/managing-asynchrony">管理异步</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/understanding-ember/keeping-templates-up-to-date">模板自动更新</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/understanding-ember/debugging">调试</a>
            </li>
          </ol></li></ol>
  
          <div id="back-to-top"><a id="back-top-top" href="#">&#11014; 返回顶部</a></div>
        </div>
      
      <div id="content" class="has-sidebar">
          
  

  

  <div class="chapter">
    
        <h1>指定路由的模型 
          <a href="https://github.com/emberjs-cn/www.emberjs.cn/tree/master/source/guides/routing/specifying-a-routes-model.md" target="_blank" class="edit-page">
            编辑页面</a>
        </h1>
      
    <hr>
    <p>英文原文: <a href="http://emberjs.com/guides/routing/specifying-a-routes-model/">http://emberjs.com/guides/routing/specifying-a-routes-model/</a></p>
<h2 class='anchorable-toc' id='toc_'>指定路由的模型</h2>
<p>Templates in your application are backed by models. But how do templates
know which model they should display?</p>

<p>For example, if you have a <code>photos</code> template, how does it know which
model to render?</p>

<p>This is one of the jobs of an <code>Ember.Route</code>. You can tell a template
which model it should render by defining a route with the same name as
the template, and implementing its <code>model</code> hook.</p>

<p>For example, to provide some model data to the <code>photos</code> template, we
would define an <code>App.PhotosRoute</code> object:</p>
<div class="highlight js "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
</pre></td>
  <td class="code"><pre>App.PhotosRoute = Ember.Route.extend({
  <span class="function">model</span>: <span class="keyword">function</span>() {
    <span class="keyword">return</span> [{
      <span class="key">title</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Tomster</span><span class="delimiter">&quot;</span></span>,
      <span class="key">url</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">http://emberjs.com/images/about/ember-productivity-sm.png</span><span class="delimiter">&quot;</span></span>
    }, {
      <span class="key">title</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Eiffel Tower</span><span class="delimiter">&quot;</span></span>,
      <span class="key">url</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">http://emberjs.com/images/about/ember-structure-sm.png</span><span class="delimiter">&quot;</span></span>
    }];
  }
});
</pre></td>
</tr></table>
</div></div>
<p><a class="jsbin-embed" href="http://jsbin.com/oLUTEd/1/embed?js">JS Bin</a><script src="http://static.jsbin.com/js/embed.js"></script></p>
<h3 class='anchorable-toc' id='toc_asynchronously-loading-models'>Asynchronously Loading Models</h3>
<p>In the above example, the model data was returned synchronously from the
<code>model</code> hook. This means that the data was available immediately and
your application did not need to wait for it to load, in this case
because we immediately returned an array of hardcoded data.</p>

<p>Of course, this is not always realistic. Usually, the data will not be
available synchronously, but instead must be loaded asynchronously over
the network. For example, we may want to retrieve the list of photos
from a JSON API available on our server.</p>

<p>In cases where data is available asynchronously, you can just return a
promise from the <code>model</code> hook, and Ember will wait until that promise is
resolved before rendering the template.</p>

<p>If you&#39;re unfamiliar with promises, the basic idea is that they are
objects that represent eventual values. For example, if you use jQuery&#39;s
<code>getJSON()</code> method, it will return a promise for the JSON that is
eventually returned over the network. Ember uses this promise object to
know when it has enough data to continue rendering.</p>

<p>For more about promises, see <a href="/guides/routing/asynchronous-routing/#toc_a-word-on-promises">A Word on
Promises</a>
in the Asynchronous Routing guide.</p>

<p>Let&#39;s look at an example in action. Here&#39;s a route that loads the most
recent pull requests sent to Ember.js on GitHub:</p>
<div class="highlight js "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre>App.PullRequestsRoute = Ember.Route.extend({
  <span class="function">model</span>: <span class="keyword">function</span>() {
    <span class="keyword">return</span> Ember.<span class="predefined">$</span>.getJSON(<span class="string"><span class="delimiter">'</span><span class="content">https://api.github.com/repos/emberjs/ember.js/pulls</span><span class="delimiter">'</span></span>);
  }
});
</pre></td>
</tr></table>
</div></div>
<p>While this example looks like it&#39;s synchronous, making it easy to read
and reason about, it&#39;s actually completely asynchronous. That&#39;s because
jQuery&#39;s <code>getJSON()</code> method returns a promise. Ember will detect the
fact that you&#39;ve returned a promise from the <code>model</code> hook, and wait
until that promise resolves to render the <code>pullRequest</code> template.</p>

<p>(For more information on jQuery&#39;s XHR functionality, see
<a href="http://api.jquery.com/jQuery.ajax/">jQuery.ajax</a> in the jQuery
documentation.)</p>

<p>Because Ember supports promises, it can work with any persistence
library that uses them as part of its public API. You can also use many
of the conveniences built in to promises to make your code even nicer.</p>

<p>For example, imagine if we wanted to modify the above example so that
the template only displayed the three most recent pull requests. We can
rely on promise chaining to modify the data returned from the JSON
request before it gets passed to the template:</p>
<div class="highlight js "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
</pre></td>
  <td class="code"><pre>App.PullRequestsRoute = Ember.Route.extend({
  <span class="function">model</span>: <span class="keyword">function</span>() {
    <span class="keyword">var</span> url = <span class="string"><span class="delimiter">'</span><span class="content">https://api.github.com/repos/emberjs/ember.js/pulls</span><span class="delimiter">'</span></span>;
    <span class="keyword">return</span> Ember.<span class="predefined">$</span>.getJSON(url).then(<span class="keyword">function</span>(data) {
      <span class="keyword">return</span> data.splice(<span class="integer">0</span>, <span class="integer">3</span>);
    });
  }
});
</pre></td>
</tr></table>
</div></div><h3 class='anchorable-toc' id='toc_setting-up-controllers-with-the-model'>Setting Up Controllers with the Model</h3>
<p>So what actually happens with the value you return from the <code>model</code>
hook?</p>

<p>By default, the value returned from your <code>model</code> hook will be assigned
to the <code>model</code> property of the associated controller. For example, if your
<code>App.PostsRoute</code> returns an object from its <code>model</code> hook, that object
will be set as the <code>model</code> property of the <code>App.PostsController</code>.</p>

<p>(This, under the hood, is how templates know which model to render: they
look at their associated controller&#39;s <code>model</code> property. For example, the
<code>photos</code> template will render whatever the <code>App.PhotosController</code>&#39;s
<code>model</code> property is set to.)</p>

<p>See the <a href="/guides/routing/setting-up-a-controller">Setting Up a Controller guide</a> to learn how to change this
default behavior. Note that if you override the default behavior and do
not set the <code>model</code> property on a controller, your template will not
have any data to render!</p>
<h3 class='anchorable-toc' id='toc_'>动态模型</h3>
<p>Some routes always display the same model. For example, the <code>/photos</code>
route will always display the same list of photos available in the
application. If your user leaves this route and comes back later, the
model does not change.</p>

<p>However, you will often have a route whose model will change depending
on user interaction. For example, imagine a photo viewer app. The
<code>/photos</code> route will render the <code>photos</code> template with the list of
photos as the model, which never changes. But when the user clicks on a
particular photo, we want to display that model with the <code>photo</code>
template. If the user goes back and clicks on a different photo, we want
to display the <code>photo</code> template again, this time with a different model.</p>

<p>In cases like this, it&#39;s important that we include some information in
the URL about not only which template to display, but also which model.</p>

<p>In Ember, this is accomplished by defining routes with <em>dynamic segments</em>.</p>

<p>A dynamic segment is a part of the URL that is filled in by the current
model&#39;s ID. Dynamic segments always start with a colon (<code>:</code>). Our photo
example might have its <code>photo</code> route defined like this:</p>
<div class="highlight js "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
</pre></td>
  <td class="code"><pre>App.Router.map(<span class="keyword">function</span>() {
  <span class="local-variable">this</span>.resource(<span class="string"><span class="delimiter">'</span><span class="content">photo</span><span class="delimiter">'</span></span>, { <span class="key">path</span>: <span class="string"><span class="delimiter">'</span><span class="content">/photos/:photo_id</span><span class="delimiter">'</span></span> });
});
</pre></td>
</tr></table>
</div></div>
<p>In this example, the <code>photo</code> route has a dynamic segment <code>:photo_id</code>.
When the user goes to the <code>photo</code> route to display a particular photo
model (usually via the <code>{{link-to}}</code> helper), that model&#39;s ID will be
placed into the URL automatically.</p>

<p>See <a href="/guides/templates/links">Links</a> for more information about linking
to a route with a model using the <code>{{link-to}}</code> helper.</p>

<p>For example, if you transitioned to the <code>photo</code> route with a model whose
<code>id</code> property was <code>47</code>, the URL in the user&#39;s browser would be updated
to:</p>
<div class="highlight  "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>/photos/47
</pre></td>
</tr></table>
</div></div>
<p>What happens if the user visits your application directly with a URL
that contains a dynamic segment? For example, they might reload the
page, or send the link to a friend, who clicks on it. At that point,
because we are starting the application up from scratch, the actual
JavaScript model object to display has been lost; all we have is the ID
from the URL.</p>

<p>Luckily, Ember will extract any dynamic segments from the URL for
you and pass them as a hash to the <code>model</code> hook as the first argument:</p>
<div class="highlight js "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
</pre></td>
  <td class="code"><pre>App.Router.map(<span class="keyword">function</span>() {
  <span class="local-variable">this</span>.resource(<span class="string"><span class="delimiter">'</span><span class="content">photo</span><span class="delimiter">'</span></span>, { <span class="key">path</span>: <span class="string"><span class="delimiter">'</span><span class="content">/photos/:photo_id</span><span class="delimiter">'</span></span> });
});

App.PhotoRoute = Ember.Route.extend({
  <span class="function">model</span>: <span class="keyword">function</span>(params) {
    <span class="keyword">return</span> Ember.<span class="predefined">$</span>.getJSON(<span class="string"><span class="delimiter">'</span><span class="content">/photos/</span><span class="delimiter">'</span></span>+params.photo_id);
  }
});
</pre></td>
</tr></table>
</div></div>
<p>In the <code>model</code> hook for routes with dynamic segments, it&#39;s your job to
turn the ID (something like <code>47</code> or <code>post-slug</code>) into a model that can
be rendered by the route&#39;s template. In the above example, we use the
photo&#39;s ID (<code>params.photo_id</code>) to construct a URL for the JSON
representation of that photo. Once we have the URL, we use jQuery to
return a promise for the JSON model data.</p>

<p>注意：一个具有动态段的路由只有在通过URL访问的时候，<code>model</code>钩子才会被调用。如果路由是从一个跳转进入的（例如：使用Handlebars的<a href="/guides/templates/links">link-to</a>助手时），模型上下文已经准备好了，因此<code>model</code>钩子这时不会被执行。没有动态段的路由其<code>model</code>钩子每次都会被执行。</p>
<h3 class='anchorable-toc' id='toc_ember-data'>Ember Data</h3>
<p>Many Ember developers use a model library to make finding and saving
records easier than manually managing Ajax calls. In particular, using a
model library allows you to cache records that have been loaded,
significantly improving the performance of your application.</p>

<p>One popular model library built for Ember is Ember Data. To learn more
about using Ember Data to manage your models, see the
<a href="/guides/models">Models</a> guide.</p>

    
      <footer>
        
          <a class="previous-guide" href="/guides/routing/generated-objects">
            ← 生成的对象
          </a>
         
        <a class="next-guide" href="/guides/routing/setting-up-a-controller">
          设置控制器 →
        </a>
      
      </footer>
      
  </div>

      </div>
    </div>

    <div id="footer">
      <div id="footer-wrapper">
        <div class="info">&copy; 2013 Emberjs.CN <br/>Design by <a href="http://www.heropixel.com">HeroPixel</a></div>
        <div class="statement"><b>声明：</b>本站的文章可以随意在网上转载，但必须注明原文出处！</div>
        <div class="links">
          <a href="http://weibo.com/embercn"><img src="/images/weibo.png"/></a>
          <a href="http://emberjs.cn/blog/feed.xml"><img src="/images/feed.png"/></a>
        </div>
      </div>
    </div>

    <script type="text/javascript">
      var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
      document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F0b0fcec01b06cc76e274f7b21f4766c4' type='text/javascript'%3E%3C/script%3E"));

      $(function() {
        $('a[href="http://tongji.baidu.com/hm-web/welcome/ico?s=0b0fcec01b06cc76e274f7b21f4766c4"]').hide();
      });
    </script>

  </body>
</html>
